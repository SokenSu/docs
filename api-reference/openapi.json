{"openapi":"3.0.1","info":{"title":"HEMS-OpenAPI","description":"","version":"1.0.0"},"tags":[{"name":"v1"},{"name":"v1/Authentication"},{"name":"v1/Station Management"}],"paths":{"/v1/station/create":{"post":{"summary":"Create station","deprecated":false,"description":"","tags":["v1/Station Management"],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"stationName":{"type":"string","description":"station name","maxLength":255,"minLength":1},"latitude":{"type":"string","description":"station latitude"},"longitude":{"type":"string","description":" station longitude"},"timeZone":{"type":"string","description":"station time zone  IANA Time Zone ,Europe/Berlin","examples":["Europe/Berlin"]},"city":{"type":"string","description":"station  city Berlin","maxLength":255,"minLength":1},"postalCode":{"type":"string","description":"station postal code"},"country":{"type":"string","description":"station  country ISO country code. DE","minLength":1,"maxLength":5}},"required":["stationName","longitude","timeZone","city","country","latitude"]},"example":{"stationName":"ewqe","latitude":"1","longitude":"1","timeZone":"Europe/Berlin","city":"Berlin","postalCode":"T5T 5L7","country":"DE"}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"stationId":{"type":"string","description":"station ID"}},"required":["stationId"]},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"stationId":23145},"message":""}}}}}}},"security":[]}},"/v1/account/token":{"post":{"summary":"Get Token","deprecated":false,"description":"","tags":["v1/Authentication"],"parameters":[],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"appId":{"type":"string","description":"app ID","title":"应用ID"},"appSecret":{"type":"string","title":"密钥","description":"app token secret"}},"required":["appId","appSecret"]},"example":{"appId":"123454674","appSecret":"dsadkksdash1234hkjsjdkhakhdk23"}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"response code"},"requestId":{"type":"string","description":"request id"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"tokenType":{"type":"string","description":"tokenType  default: bearer"},"accessToken":{"type":"string","description":"access token"},"expireTime":{"type":"integer","description":"access token expire time"},"refreshToken":{"type":"string","description":"refresh token 暂不使用"},"refreshExpireTime":{"type":"integer","description":"refresh token expire time 暂不使用"}},"required":["accessToken","tokenType","refreshToken","expireTime","refreshExpireTime"]},"message":{"type":"string","description":"message"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"accessToken":"xxxxxxxxxxxxxx","tokenType":"bearer","refreshToken":"xxxxxxx","expireTime":123456,"refreshExpireTime":123456},"message":""}}}}}}},"security":[]}},"/v1/station/{id}":{"get":{"summary":"Get station info","deprecated":false,"description":"","tags":["v1/Station Management"],"parameters":[{"name":"id","in":"path","description":"","required":true,"example":"1812699012305043458","schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"stationId":{"type":"string","description":"station ID"},"stationName":{"type":"string","description":"station name"},"latitude":{"type":"string","description":"station latitude"},"longitude":{"type":"string","description":"station longitude"},"timeZone":{"type":"string","description":"station time zone  IANA Time Zone"},"postalCode":{"type":"string","description":"station postal code"},"city":{"type":"string","description":"station  city"},"country":{"type":"string","description":"station  country ISO country code"},"prices":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"priceCode":{"type":"string"},"priceType":{"type":"string","title":"价格类型  MARKET RETAILER PRODUCT "},"direction":{"type":"string","title":"价格方向：BOTHWAY EXPORT IMPORT"},"priceSource":{"type":"string","title":"价格对接渠道：Amber、Tibber、LocalVolts"},"expandParam":{"type":"object","properties":{},"title":"价格额外参数"}},"required":["name","expandParam","priceCode","direction","priceSource","priceType"]}}},"required":["stationId","stationName","latitude","longitude","timeZone","city","country","postalCode","prices"]},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","data":{"stationId":1815945784808796200,"stationName":"测试","latitude":"52.539100","longitude":"13.565000","timeZone":"Europe/Berlin","city":"Berlin","country":"DE","prices":[{"name":"Germany LU","priceCode":"DE-LU","direction":"EXPORT","priceSource":null,"priceType":"MARKET","expandParam":{"token":null}},{"name":"Germany LU","priceCode":"DE-LU","direction":"IMPORT","priceSource":null,"priceType":"MARKET","expandParam":{"token":null}}]},"message":"Success","success":true,"requestId":null}}}}}}},"security":[]}},"/v1/station/{stationId}/price":{"get":{"summary":"get station price detail","deprecated":false,"description":"目前不支持返回\"priceType\"= \"RETAILER\"的价格详情，后续支持\nstartTime endTime间隔目前最长2天","tags":["v1/Station Management"],"parameters":[{"name":"stationId","in":"path","description":"","required":true,"schema":{"type":"string"}},{"name":"startTime","in":"query","description":"开始时间","required":true,"example":"2024-06-13T00:00:00Z","schema":{"type":"string"}},{"name":"endTime","in":"query","description":"结束时间","required":true,"example":"2024-06-14T00:00:00Z","schema":{"type":"string"}},{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"importPrice":{"type":"object","properties":{"priceCode":{"type":"string","title":"价格code"},"priceType":{"type":"string","title":"价格类型 MARKET、PRODUCT"},"priceSource":{"type":"string","title":"价格对接渠道：Amber、Tibber、LocalVolts"},"name":{"type":"string","title":"名称"},"countryCode":{"type":"string","title":"国家code"},"prices":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","title":"价格类型:history-过去 current-当前 forcast-预测"},"date":{"type":"string","title":"日期"},"frequency":{"type":"integer","title":"价格时间间隔 分钟"},"startTime":{"type":"string","title":"开始时间2024-05-14T14:00:01Z"},"endTime":{"type":"string","title":"结束时间2024-05-14T14:05:00Z"},"price":{"type":"number","title":"价格"},"taxFee":{"type":"number","title":"费率"},"unit":{"type":"string","title":"单位"},"direction":{"type":"string","title":"价格方向：EXPORT IMPORT"}},"required":["type","date","frequency","startTime","endTime","price","taxFee","unit","direction"]}}},"required":["priceCode","priceType","priceSource","name","countryCode","prices"],"title":"购电价格"},"exportPrice":{"type":"object","properties":{"priceCode":{"type":"string"},"priceType":{"type":"string"},"priceSource":{"type":"null"},"name":{"type":"string"},"countryCode":{"type":"string"},"prices":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string"},"date":{"type":"string"},"frequency":{"type":"integer"},"startTime":{"type":"string"},"endTime":{"type":"string"},"price":{"type":"number"},"taxFee":{"type":"number"},"unit":{"type":"string"},"direction":{"type":"string"}},"required":["type","date","frequency","startTime","endTime","price","taxFee","unit","direction"]}}},"required":["priceCode","priceType","priceSource","name","countryCode","prices"],"title":"卖电价格"}},"required":["importPrice","exportPrice"]},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"importPrice":{"priceCode":"DE-LU","priceType":"MARKET","priceSource":null,"name":"DE-LU","countryCode":"DE","prices":[{"type":"history","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"current","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"forcast","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"}]},"exportPrice":{"priceCode":"DE-LU","priceType":"MARKET","priceSource":null,"name":"DE-LU","countryCode":"DE","prices":[{"type":"history","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"current","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"forcast","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"}]}},"message":""}},"2":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"priceCode":"DE-LU","priceType":"PRODUCT","priceSource":null,"name":"DE-LU","countryCode":"DE","prices":[{"type":"history","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"current","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"forcast","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"}]},"message":""}},"3":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"priceCode":"DE-LU","priceType":"RETAILER","priceSource":"Amber","name":"DE-LU","countryCode":"DE","prices":[{"type":"history","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"current","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"},{"type":"forcast","date":"2024-05-15","frequency":5,"startTime":"2024-05-14T14:00:01Z","endTime":"2024-05-14T14:05:00Z","price":45.20916,"taxFee":0.20916,"unit":"$/kWh","direction":"EXPORT"}]},"message":""}}}}}}},"security":[]}},"/v1/station/update":{"post":{"summary":"Update station info","deprecated":false,"description":"","tags":["v1/Station Management"],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"stationId":{"type":"string","description":"station ID"},"stationName":{"type":"string","description":"station name","maxLength":255,"minLength":1},"latitude":{"type":"string","description":"station latitude"},"longitude":{"type":"string","description":" station longitude"},"timeZone":{"type":"string","description":"station time zone  IANA Time Zone","examples":["Europe/Berlin"]},"city":{"type":"string","description":"station  city","maxLength":255,"minLength":1},"postalCode":{"type":"string","description":"station postal code"},"country":{"type":"string","description":"station  country ISO country code","minLength":1,"maxLength":5}},"required":["stationName","longitude","timeZone","city","country","latitude","stationId"]},"example":{"stationId":1813885072420376600,"stationName":"ewqe","latitude":"12","longitude":"1","timeZone":"Europe/Berlin","city":"Berlin","postalCode":"T5T 5L7","country":"DE"}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{}},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":null,"message":""}}}}}}},"security":[]}},"/v1/station/bindPrice":{"post":{"summary":"station bind price","deprecated":false,"description":"1.后面绑定的市场、套餐或零售商覆盖之前绑定的，修改后当天价格改变，历史价格不变\n2.先设置入参direction=BOTHWAY，后设置direction=IMPOR或EXPORT，之前设置的全部被清除，只保留本次方向\n3.先设置入参direction=IMPOR或EXPORT，后设置direction=IMPOR或EXPORT，同方向被覆盖，不同方向无变化\n4.先设置入参direction=IMPOR、EXPORT或BOTHWAY，后设置direction=BOTHWAY，全部方向被覆盖\n5.方向说明：\n市场、套餐或零售商方向direction=BOTHWAY，此api绑定支持BOTHWAY EXPORT IMPOR\n市场、套餐或零售商方向direction=IMPOR，此api绑定支持IMPOR\n市场、套餐或零售商方向direction=EXPORT，此api绑定支持EXPORT\n例子：\n// 绑定市场 支持BOTHWAY EXPORT IMPOR\n{\n    \"stationId\": \"1818106959310934017\",\n    \"priceId\": \"1818107260584292353\",\n    \"direction\": \"BOTHWAY\",\n}\n// 绑定套餐 支持BOTHWAY EXPORT IMPOR\n{\n    \"stationId\": \"1818106959310934017\",\n    \"priceId\": \"1818107260584292353\",\n    \"direction\": \"BOTHWAY\",\n}\n// 绑定Amber零售商 必须BOTHWAY\n{\n    \"stationId\": \"1818106959310934017\",\n    \"priceId\": \"1818107260584292353\",\n    \"direction\": \"BOTHWAY\",\n    \"expandParam\": {\n        \"token\": \"psk_18767dbc7efad76a24d190f291d72c40\"\n    }\n}\n// 绑定Tibber零售商 仅支持IMPORT\n{\n    \"stationId\": \"1818106959310934017\",\n    \"priceId\": \"1818107260584292353\",\n    \"direction\": \"IMPORT\",\n    \"expandParam\": {\n        \"token\": \"psk_18767dbc7efad76a24d190f291d72c40\"\n    }\n}\n// 绑定LocalVolts零售商 必须BOTHWAY\n{\n    \"stationId\": \"1818106959310934017\",\n    \"priceId\": \"1818107260584292353\",\n    \"direction\": \"BOTHWAY\",\n    \"expandParam\": {\n        \"partner\": \"xxxxxxxxxxxxxx\",\n        \"apiKey\": \"xxxxxxxxxxxxxx\",\n    }\n}","tags":["v1/Station Management"],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"stationId":{"type":"string","description":"场站ID"},"priceId":{"type":"string","description":"价格ID"},"direction":{"type":"string","description":"价格方向：BOTHWAY EXPORT IMPORT"},"expandParam":{"type":"object","properties":{"token":{"type":"string","description":"token Amber和Tibber使用"},"apiKey":{"type":"string","description":"LocalVolts使用"},"partner":{"type":"string","description":"LocalVolts使用"}},"description":"扩展参数 retailer时，priceSource 为 Amber Tibber 传token"}},"required":["stationId","priceId","direction"]},"example":{"stationId":"1812699012305043457","priceId":"1727556518150680578","direction":"IMPORT","expandParam":{"token":"2134443534fdsfs"}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{}},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":null,"message":""}}}}}}},"security":[]}},"/v1/station/unbindPrice":{"post":{"summary":"station unbind price","deprecated":false,"description":"\n","tags":["v1/Station Management"],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"stationId":{"type":"string","description":"场站ID"},"direction":{"type":"string","description":"价格方向：BOTHWAY EXPORT IMPORT"}},"required":["stationId","direction"]},"example":{"stationId":"1812699012305043457","direction":"IMPORT"}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{}},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":null,"message":""}}}}}}},"security":[]}},"/v1/station/delete":{"post":{"summary":"Delete station","deprecated":false,"description":"","tags":["v1/Station Management"],"parameters":[{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"stationId":{"type":"string","description":"station ID"}},"required":["stationId"]},"example":{"stationId":123}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{}},"message":{"type":"string"}},"required":["code","requestId","success","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":null,"message":""}}}}}}},"security":[]}},"/v1/station/list":{"get":{"summary":"List station info","deprecated":false,"description":"","tags":["v1/Station Management"],"parameters":[{"name":"pageNum","in":"query","description":"start page number","required":false,"example":1,"schema":{"type":"integer"}},{"name":"pageSize","in":"query","description":"page size","required":false,"example":10,"schema":{"type":"integer","default":10}},{"name":"Authorization","in":"header","description":"","required":true,"example":"Bearer {{token}}","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{}},"example":{}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"},"requestId":{"type":"string"},"success":{"type":"boolean"},"data":{"type":"object","properties":{"pageNum":{"type":"integer"},"pageSize":{"type":"integer"},"totalSize":{"type":"integer"},"list":{"type":"array","items":{"type":"object","properties":{"stationId":{"type":"integer","description":"station ID"},"stationName":{"type":"string","description":"station name"},"latitude":{"type":"string","description":"station latitude"},"longitude":{"type":"string","description":"station longitude"},"timeZone":{"type":"string","description":"station time zone"},"city":{"type":"string","description":"station city"},"country":{"type":"string","description":"station country"}}}}},"required":["pageNum","pageSize","totalSize","list"]},"message":{"type":"string"}},"required":["code","requestId","success","data","message"]},"examples":{"1":{"summary":"成功示例","value":{"code":"0000","requestId":"uuid","success":true,"data":{"pageNum":1,"pageSize":10,"totalSize":2,"list":[{"stationId":23145,"stationName":"","latitude":"","longitude":"","timeZone":"Europe/Berlin","city":"","country":"DE"}]},"message":""}}}}}}},"security":[]}}},"components":{"schemas":{},"securitySchemes":{}},"servers":[]}